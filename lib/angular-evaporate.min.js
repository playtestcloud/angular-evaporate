!function(e){"use strict";angular.module("evaporate",[]).provider("eva",function(){var t;this.config=function(e){t=e},this.$get=[function(){return{_:new e(t),urlBase:"http://"+t.bucket+".s3.amazonaws.com/"}}]}).directive("evaporate",["eva",function(e){function t(t,r){function a(){}function n(e,t){for(var r=e.length,a=0;r>a;a++)if(angular.equals(e[a],t))return a;return-1}t.data||(t.data={});var o=t.data,i=o.dir?o.dir+"/":"",s=o.timestampSeparator||"$",p=o.headersCommon||{},u=o.headersSigned||{},l="function"==typeof o.onFileProgress?o.onFileProgress:a,f="function"==typeof o.onFileComplete?o.onFileComplete:a,c="function"==typeof o.onFileError?o.onFileError:a;o.ready=!1,e._.supported&&(r.bind("change",function(a){o.files=[],angular.forEach(a.target.files,function(r){r.started=Date.now(),r.path_=i+r.started+s+r.name,r.url=e.urlBase+r.path_,e._.add({name:r.path_,file:r,contentType:r.type||"binary/octet-stream",notSignedHeadersAtInitiate:p,xAmzHeadersAtInitiate:u,complete:function(){r.completed=!0,f(r),t.$apply()},progress:function(e){r.progress=Math.round(1e4*e)/100,r.timeLeft=Math.round((100-r.progress)/r.progress*(Date.now()-r.started)/1e3),l(r),t.$apply()},error:function(e){var a=n(o.files,r);-1!==a&&o.files.splice(a,1),c(r,e),t.$apply()}}),o.files.push(r)}),r.wrap("<form>").closest("form").get(0).reset(),r.unwrap(),t.$apply()}),o.ready=!0)}return{restrict:"A",link:t,scope:{data:"=evaModel"}}}])}(Evaporate);