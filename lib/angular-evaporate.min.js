!function(e){"use strict";angular.module("evaporate",[]).provider("eva",function(){var t;this.config=function(e){t=e},this.$get=[function(){return{_:new e(t),urlBase:"http://"+t.bucket+".s3.amazonaws.com/"}}]}).directive("evaporate",["eva",function(e){function t(t,n){function a(){}function r(e,t){for(var n=e.length,a=0;n>a;a++)if(angular.equals(e[a],t))return a;return-1}t.data||(t.data={});var o=t.data,i=o.dir?o.dir+"/":"",l=o.timestampSeparator||"$",c=o.headersCommon||{},s=o.headersSigned||{},p="function"==typeof o.onFileProgress?o.onFileProgress:a,u="function"==typeof o.onFileComplete?o.onFileComplete:a,f="function"==typeof o.onFileError?o.onFileError:a,d="function"==typeof o.onFileCancelled?o.onFileCancelled:a;o.ready=!1,e._.supported&&(n.bind("change",function(a){o.files=[],angular.forEach(a.target.files,function(n){n.started=Date.now(),n.path_=i+n.started+l+n.name,n.url=e.urlBase+n.path_;var a=e._.add({name:n.path_,file:n,contentType:n.type||"binary/octet-stream",notSignedHeadersAtInitiate:c,xAmzHeadersAtInitiate:s,complete:function(){n.completed=!0,u(n),t.$apply()},progress:function(e){n.progress=Math.round(1e4*e)/100,n.timeLeft=Math.round((100-n.progress)/n.progress*(Date.now()-n.started)/1e3),p(n),t.$apply()},error:function(e){var a=r(o.files,n);-1!==a&&o.files.splice(a,1),f(n,e),t.$apply()},cancelled:function(){n.cancelled=!0,d(n),t.$apply()}});n.cancel=function(){e._.cancel(a)},o.files.push(n)}),n.wrap("<form>").closest("form").get(0).reset(),n.unwrap(),t.$apply()}),o.ready=!0)}return{restrict:"A",link:t,scope:{data:"=evaModel"}}}])}(Evaporate);